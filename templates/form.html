<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenue à Dead End - Initialize Your Nightmare</title>
       <link rel="stylesheet" href="{{ url_for('static', filename='form.css') }}">
</head>
<body>
    <!-- Background Image -->
    <div class="bg-image"></div>

    <!-- Background Animation Elements -->
    <div class="bg-animation">
        <div class="floating-mist mist-1"></div>
        <div class="floating-mist mist-2"></div>
        <div class="floating-mist mist-3"></div>
        <div class="moonlight"></div>
        <div class="tree-shadow tree-1"></div>
        <div class="tree-shadow tree-2"></div>
        <div class="tree-shadow tree-3"></div>
    </div>

    <!-- Main Container -->
    <div class="init-container">
        <!-- Header -->
        <div class="init-header">
            <h1 class="init-title">Bienvenue à Dead End</h1>
            <p class="init-subtitle">Forge your path into darkness...</p>
        </div>

        <!-- Form Card -->
        <div class="form-card">
           <form id="storyInitForm" method="POST" action="/">
    <div class="form-group">
        <label class="form-label" for="playerName">Your Name</label>
        <input
            type="text"
            id="playerName"
            name="name"
            class="form-input"
            placeholder="Enter your name, wanderer..."
            required
        >
    </div>

    <div class="form-group">
        <label class="form-label" for="storyBlueprint">Story Blueprint</label>
        <textarea
            id="storyBlueprint"
            name="blueprint"
            class="form-textarea"
            placeholder="e.g., A man lost in a forest with his car..."
            required
        ></textarea>
    </div>

    <div class="form-group">
        <label class="form-label" for="storyDuration">Story Duration</label>
        <div class="duration-container">
            <input
                type="range"
                id="storyDuration"
                name="duration"
                class="duration-slider"
                min="1"
                max="3"
                value="2"
            >
            <div class="duration-labels">
                <span>Short (5 mins)</span>
                <span>Medium (10 mins)</span>
                <span>Long (15+ mins)</span>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="form-label" for="narrativeProtocol">Narrative Protocol</label>
        <select
            id="narrativeProtocol"
            name="protocol"
            class="form-select"
            required
        >
            <option value="" disabled selected>— Choose your narrator —</option>
            <option value="lostSoul">👻 A Lost Soul (Desperate, emotional, first-person)</option>
            <option value="ancientEntity">💀 An Ancient Entity (All-knowing, cryptic)</option>
            <option value="childSpirit">🧒 A Child Spirit (Innocent, eerie tone)</option>
            <option value="unknownVoice">🕯️ The Unknown Voice (Shifting, unreliable narrator)</option>
            <option value="you">🩸 You (The story is about you — in second person)</option>
        </select>
    </div>

    <button type="submit" class="begin-btn" id="beginBtn">
        🕯️ Begin the Nightmare 🕯️
    </button>
</form>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("storyInitForm");
    const beginBtn = document.getElementById("beginBtn");

    if (form) {
        form.addEventListener("submit", (e) => {
            const name = form.querySelector("input[name='name']").value.trim();
            const blueprint = form.querySelector("textarea[name='blueprint']").value.trim();
            const protocol = form.querySelector("select[name='protocol']").value;

            // Basic client-side validation
            if (!name || !blueprint || !protocol) {
                e.preventDefault(); // Stop form from submitting
                alert("Please complete all required fields, wanderer.");
                return;
            }

            // Optional: Disable button and show loading
            if (beginBtn) {
                beginBtn.disabled = true;
                beginBtn.textContent = "Summoning Shadows...";
            }
        });
    }
});


</script>

</body>
</html>