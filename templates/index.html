<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Tales - Interactive Horror</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='story.css') }}">
</head>
<body>
    <!-- Background Animation Elements -->
    <div class="bg-animation">
        <div class="floating-mist mist-1"></div>
        <div class="floating-mist mist-2"></div>
        <div class="floating-mist mist-3"></div>
        <div class="glowing-eyes eyes-1"></div>
        <div class="glowing-eyes eyes-2"></div>
        <div class="glowing-eyes eyes-3"></div>
        <div class="glowing-eyes eyes-4"></div>
    </div>

    <!-- Header Navigation -->
    <header class="header">
        <nav class="nav">
            <div class="logo">Dark Tales</div>
            <div class="nav-menu">
                <a href="#" class="nav-item">New Game</a>
                <a href="#" class="nav-item">Continue</a>
                <a href="#" class="nav-item">Settings</a>
                <a href="#" class="nav-item">Themes</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content fade-in">
        <!-- Story Image -->
        <div class="story-image">
            <div class="image-placeholder">
                AI-generated horror scene image here
            </div>
        </div>

        <!-- Story Container -->
        <div class="story-container">
            <div class="story-box">
                <p class="story-text">
                    The ancient door creaks open, revealing a corridor shrouded in impenetrable darkness. The musty air carries whispers of forgotten souls, and your flickering candle barely illuminates the decay that surrounds you. As you step forward, the floorboards groan beneath your feet, and you notice strange symbols carved into the walls—symbols that seem to writhe and shift in the dancing candlelight. At the end of the corridor, two paths diverge: one leads to a spiral staircase descending into the bowels of the earth, while the other opens to a chamber where shadows dance without any source of light...
                </p>
            </div>
        </div>

        <!-- Choice Buttons -->
        <div class="choices-container">
            <button class="choice-btn" onclick="makeChoice(1)">
                <strong>Descend the spiral staircase</strong><br>
                Follow the stone steps into the depths below, where the whispers grow louder and the air grows colder
            </button>
            <button class="choice-btn" onclick="makeChoice(2)">
                <strong>Enter the shadow chamber</strong><br>
                Step into the room where darkness itself seems alive, dancing without light or reason
            </button>
        </div>
    </main>

    <script>
        function makeChoice(choice) {
            // Add distortion effect
            document.body.classList.add('distortion');

            // Simulate story progression
            const storyText = document.querySelector('.story-text');
            const choices = document.querySelectorAll('.choice-btn');

            // Fade out current content
            document.querySelector('.story-container').style.opacity = '0.5';
            document.querySelector('.choices-container').style.opacity = '0.5';

            setTimeout(() => {
                if (choice === 1) {
                    storyText.textContent = "You descend the spiral staircase, each step echoing in the void below. The whispers become clearer now—they speak your name, calling you deeper into the abyss. Suddenly, your candle extinguishes, leaving you in complete darkness. You hear something breathing behind you, its hot breath on your neck. Do you dare to turn around, or will you continue blindly into the unknown depths?";
                    choices[0].innerHTML = "<strong>Turn around to face what's behind you</strong><br>Confront the presence that breathes down your neck in the darkness";
                    choices[1].innerHTML = "<strong>Continue deeper into the abyss</strong><br>Press forward blindly, following the whispers that call your name";
                } else {
                    storyText.textContent = "You step into the shadow chamber, and immediately the dancing shadows surround you like living creatures. They caress your skin with an otherworldly chill, and you realize they are not mere shadows—they are the remnants of those who came before. In the center of the room, a mirror reflects not your image, but the faces of the lost souls. One shadow extends what appears to be a hand, while another points toward a hidden passage behind the mirror.";
                    choices[0].innerHTML = "<strong>Take the shadow's hand</strong><br>Allow the ghostly presence to guide you into their eternal dance";
                    choices[1].innerHTML = "<strong>Follow the passage behind the mirror</strong><br>Step through the looking glass into whatever lies beyond";
                }

                // Fade back in
                document.querySelector('.story-container').style.opacity = '1';
                document.querySelector('.choices-container').style.opacity = '1';

                // Remove distortion effect
                setTimeout(() => {
                    document.body.classList.remove('distortion');
                }, 300);
            }, 800);
        }

        // Add some interactive hover effects for enhanced atmosphere
        document.addEventListener('mousemove', (e) => {
            const eyes = document.querySelectorAll('.glowing-eyes');
            eyes.forEach(eye => {
                const rect = eye.getBoundingClientRect();
                const eyeX = rect.left + rect.width / 2;
                const eyeY = rect.top + rect.height / 2;
                const angle = Math.atan2(e.clientY - eyeY, e.clientX - eyeX);
                const distance = Math.min(3, Math.sqrt(Math.pow(e.clientX - eyeX, 2) + Math.pow(e.clientY - eyeY, 2)) / 50);
                eye.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`;
            });
        });
    </script>
</body>
</html>